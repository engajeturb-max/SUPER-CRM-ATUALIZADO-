import{j as e,_ as D,z as q,a1 as J,ai as K,ax as Q,X as Y,U as ee,ao as te}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150010.js";import{a as o}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915004.js";import{e as ae,F as se}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915005.js";import{u as ne}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150034.js";import{u as re}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150019.js";import{p as ie,y as le,n as oe,o as ce,aZ as de,a_ as xe}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150023.js";import{A as _}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500179.js";import{W as w}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150018.js";import{a as me}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500110.js";import{U as fe}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150064.js";import{a as pe,b as ue}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500154.js";const he=o.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500177.js")),[]));function ge({userId:l,name:c}){return e.jsx(o.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(he,{userId:l,name:c})})}const je=o.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500178.js")),[]));function be(){return e.jsx(o.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(je,{})})}function A({userId:l,name:c}){const{label:T}=ie(),{variaveisWA:p}=le(),{agendamentos:m,agendamentosNaoDisparados:u,removeAgendamento:C,buttonActive:i,setButtonActive:I,openUserChat:M}=ne(),[j,b]=o.useState(!1),[x,E]=o.useState(i?m:m.filter(t=>t.userID===l)),{language:s}=re(),[k,L]=o.useState(new Map),z=async t=>{const r=await w.Contact("getProfilePictureUrl",t),{name:a}=await w.Utils("getContato",t);return{nome:a,base64:r}},H=async t=>{const r=Array.from(new Set(t.map(n=>n.userID))),a=new Map;for(const n of r){const d=await z(n);a.set(n,d)}L(a)};o.useEffect(()=>{H(x)},[x]);const h=t=>k.get(t)||{nome:"",base64:""};o.useEffect(()=>{const t=new Date().getTime(),a=(i?m:m.filter(n=>n.userID===l)).sort((n,d)=>{const G=new Date(`${n.data}T${n.hora}:00`).getTime(),V=new Date(`${d.data}T${d.hora}:00`).getTime(),X=Math.abs(G-t),Z=Math.abs(V-t);return X-Z});E(a)},[m,i,l,u]);const{open:f}=oe(),{open:S}=ce(),v=50,y=37,N="calc(85vh - 300px)",g="950px",O=()=>{const t=x.length*v+y,r=parseInt(N.replace(/[^\d]/g,""));return Math.min(t,r)},P=t=>{f(e.jsx(_,{agendamento:t,create:!1,userId:l,name:c,tipo:"agendamento"}))},R=async()=>{f(e.jsx(_,{agendamento:null,create:!0,userId:l,name:c,tipo:"agendamento"}))},U=(t,r,a=!0)=>{const n=r,d=r.parentElement;S(t,{placement:"bottom-end"},n,0,{mounted:()=>{d.classList.add("_ajv9"),a&&n.classList.add("x11t6m9b")},desmouted:()=>{d.classList.remove("_ajv9"),n.classList.remove("x11t6m9b")}})},$=t=>{M(t.userID),f(e.jsx(A,{userId:t.userID,name:c}))},W=({index:t,style:r})=>{const a=x[t];return e.jsxs("div",{style:r,className:"flex items-center rounded-lg hover:bg-base-200 cursor-pointer h-full border-solid border-b border-[var(--border-list)] last-of-type:border-none",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("span",{className:"break-words truncate",style:{maxWidth:"100px"},children:a.titulo})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center gap-2",children:[h(a.userID).base64==="undefined"?e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",children:e.jsx(fe,{})}):e.jsx("img",{src:h(a.userID).base64,className:"w-8 h-8 rounded-full object-cover",alt:"User"}),e.jsx("p",{className:"break-words truncate",style:{maxWidth:"92px"},children:h(a.userID).nome})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.tipo}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:ee.converterData(a.data)}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.hora}),e.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.recorrenciaManual?a.recorrencia?`${a.recorrencia} ${s.dias}`:s.vazia:s[a.recorrencia]||s.vazia}),e.jsxs("div",{className:"flex-1 flex items-center justify-center gap-1",children:[e.jsx("span",{className:"pulse",onClick:()=>P(a),children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx("span",{className:"pulse",onClick:()=>C(a.id,"agendamento"),children:e.jsx(me,{className:"h-4 w-4"})}),i&&l!==a.userID&&e.jsx("span",{className:"pulse lg:tooltip lg:tooltip-left",onClick:()=>$(a),"data-tip":s.agenOpenChat,children:e.jsx(xe,{className:"h-4 w-4"})})]})]},a.id)},B=()=>e.jsx("div",{className:"w-full border-collapse",children:e.jsxs("div",{className:"flex font-bold",children:[e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_titulo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_cliente}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_tipo}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_data}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_hora}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_recorrencia}),e.jsx("div",{className:"flex-1 px-4 py-3 text-xs align-middle text-center table-cell text-[#1f293799] dark:text-[#a6adbb99]",children:s.agendamento_table_acao})]})}),F=()=>{b(!0),I(!i),setTimeout(()=>{b(!1)},700)};return e.jsxs("div",{className:"grid gap-4",style:{maxHeight:"90vh",width:g},children:[e.jsxs("div",{className:"w-full flex items-center justify-between pr-2",children:[e.jsx("div",{className:`${j?"animate__animated animate__fadeIn":""}`,children:e.jsxs(q,{children:[i&&s.todas," ",s.agendamento_title," ",c?s.para+" "+c:""]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"bg-transparent border-solid border-[var(--primaria)] border rounded-lg text-[var(--primaria)] text-sm text-center self-center px-3 py-[4px] pulse relative",onClick:()=>f(e.jsx(ge,{userId:l,name:c})),children:[e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[s.relatorio,e.jsx(de,{})]}),e.jsx("div",{className:"badge badge-primary !bg-[var(--primaria)] !text-white badge-sm absolute -top-2 -right-2",children:i?u.length:u.filter(t=>t.userID===l).length})]}),e.jsx("button",{className:`border-solid border-[var(--primary)] border rounded-full text-center
            ${i?"bg-[var(--primary-muted)] text-white":"bg-transparent text-[var(--primary)]"}
            self-center px-3 py-[4px] pulse lg:tooltip lg:tooltip-bottom text-sm transition-all duration-300 ease-in`,onClick:()=>F(),"data-tip":i?s.ocultarContatosDesc:s.exibirContatosDesc,children:e.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[i?s.ocultar:s.exibirTodos,i?e.jsx(pe,{}):e.jsx(ue,{})]})}),e.jsx("div",{className:p.confgIcone+"cursor-pointer pulse flex items-center justify-center !ml-0",children:e.jsx("div",{onClick:t=>U(e.jsx(be,{}),t.currentTarget),className:p.iconeStyle+"cursor-pointer x11xpdln x1d8287x x1h4ghdb",children:e.jsx("span",{className:p.modalOptions.animChildren+"flex items-center justify-center",children:e.jsx(J,{className:T.cor_primaria?"text-[var(--primaria)]":"text-[var(--panel-header-icon)]",size:20})})})})]})]}),e.jsx("div",{className:`${j?"animate__animated animate__fadeIn":""}`,children:x.length>0?e.jsxs("div",{style:{height:O(),maxHeight:N,width:"100%"},children:[e.jsx(B,{}),e.jsx(ae,{children:({height:t,width:r})=>e.jsx(se,{height:t-y,itemCount:x.length,itemSize:v,width:g,style:{overflowX:"hidden",width:g,minHeight:"50px"},children:W})})]}):e.jsx("div",{className:"!h-fit",children:e.jsx(K,{title:s.agendamentoEmptyTitle,description:s.agendamentoEmptyDesc,icon:e.jsx(Q,{className:"w-7 h-7 text-[var(--primaria)]"})})})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(Y,{name:s.create,funcao:R})})]})}const ke=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));export{ge as R,ke as i};
