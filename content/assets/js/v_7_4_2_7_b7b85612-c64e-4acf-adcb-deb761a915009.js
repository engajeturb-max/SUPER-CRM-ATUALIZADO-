import{a as b,b as Ke}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915004.js";import{r as Xe}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915005.js";const K=Object.create(null);K.open="0";K.close="1";K.ping="2";K.pong="3";K.message="4";K.upgrade="5";K.noop="6";const yt=Object.create(null);Object.keys(K).forEach(e=>{yt[K[e]]=e});const qt={type:"error",data:"parser error"},_e=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",xe=typeof ArrayBuffer=="function",Re=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Xt=({type:e,data:t},n,s)=>_e&&t instanceof Blob?n?s(t):re(t,s):xe&&(t instanceof ArrayBuffer||Re(t))?n?s(t):re(new Blob([t]),s):s(K[e]+(t||"")),re=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function oe(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Bt;function je(e,t){if(_e&&e.data instanceof Blob)return e.data.arrayBuffer().then(oe).then(t);if(xe&&(e.data instanceof ArrayBuffer||Re(e.data)))return t(oe(e.data));Xt(e,!1,n=>{Bt||(Bt=new TextEncoder),t(Bt.encode(n))})}const ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ut=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<ce.length;e++)ut[ce.charCodeAt(e)]=e;const Je=e=>{let t=e.length*.75,n=e.length,s,i=0,r,o,c,a;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const f=new ArrayBuffer(t),l=new Uint8Array(f);for(s=0;s<n;s+=4)r=ut[e.charCodeAt(s)],o=ut[e.charCodeAt(s+1)],c=ut[e.charCodeAt(s+2)],a=ut[e.charCodeAt(s+3)],l[i++]=r<<2|o>>4,l[i++]=(o&15)<<4|c>>2,l[i++]=(c&3)<<6|a&63;return f},Qe=typeof ArrayBuffer=="function",jt=(e,t)=>{if(typeof e!="string")return{type:"message",data:Ee(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:Ge(e.substring(1),t)}:yt[n]?e.length>1?{type:yt[n],data:e.substring(1)}:{type:yt[n]}:qt},Ge=(e,t)=>{if(Qe){const n=Je(e);return Ee(n,t)}else return{base64:!0,data:e}},Ee=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Ae="",Ze=(e,t)=>{const n=e.length,s=new Array(n);let i=0;e.forEach((r,o)=>{Xt(r,!1,c=>{s[o]=c,++i===n&&t(s.join(Ae))})})},tn=(e,t)=>{const n=e.split(Ae),s=[];for(let i=0;i<n.length;i++){const r=jt(n[i],t);if(s.push(r),r.type==="error")break}return s};function en(){return new TransformStream({transform(e,t){je(e,n=>{const s=n.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,s)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(n)})}})}let Pt;function pt(e){return e.reduce((t,n)=>t+n.length,0)}function mt(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let i=0;i<t;i++)n[i]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function nn(e,t){Pt||(Pt=new TextDecoder);const n=[];let s=0,i=-1,r=!1;return new TransformStream({transform(o,c){for(n.push(o);;){if(s===0){if(pt(n)<1)break;const a=mt(n,1);r=(a[0]&128)===128,i=a[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(pt(n)<2)break;const a=mt(n,2);i=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),s=3}else if(s===2){if(pt(n)<8)break;const a=mt(n,8),f=new DataView(a.buffer,a.byteOffset,a.length),l=f.getUint32(0);if(l>Math.pow(2,21)-1){c.enqueue(qt);break}i=l*Math.pow(2,32)+f.getUint32(4),s=3}else{if(pt(n)<i)break;const a=mt(n,i);c.enqueue(jt(r?a:Pt.decode(a),t)),s=0}if(i===0||i>e){c.enqueue(qt);break}}}})}const Ce=4;function L(e){if(e)return sn(e)}function sn(e){for(var t in L.prototype)e[t]=L.prototype[t];return e}L.prototype.on=L.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};L.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};L.prototype.off=L.prototype.removeListener=L.prototype.removeAllListeners=L.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,i=0;i<n.length;i++)if(s=n[i],s===t||s.fn===t){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+e],this};L.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,i=n.length;s<i;++s)n[s].apply(this,t)}return this};L.prototype.emitReserved=L.prototype.emit;L.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};L.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ct=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),$=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),rn="arraybuffer";function Oe(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const on=$.setTimeout,cn=$.clearTimeout;function Ot(e,t){t.useNativeTimers?(e.setTimeoutFn=on.bind($),e.clearTimeoutFn=cn.bind($)):(e.setTimeoutFn=$.setTimeout.bind($),e.clearTimeoutFn=$.clearTimeout.bind($))}const an=1.33;function ln(e){return typeof e=="string"?fn(e):Math.ceil((e.byteLength||e.size)*an)}function fn(e){let t=0,n=0;for(let s=0,i=e.length;s<i;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function ke(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function un(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function hn(e){let t={},n=e.split("&");for(let s=0,i=n.length;s<i;s++){let r=n[s].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}class dn extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class Jt extends L{constructor(t){super(),this.writable=!1,Ot(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new dn(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=jt(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=un(t);return n.length?"?"+n:""}}class pn extends Jt{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};tn(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,Ze(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=ke()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Se=!1;try{Se=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const mn=Se;function gn(){}class yn extends pn{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class z extends L{constructor(t,n,s){super(),this.createRequest=t,Ot(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=Oe(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=z.requestsCount++,z.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=gn,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete z.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}z.requestsCount=0;z.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ae);else if(typeof addEventListener=="function"){const e="onpagehide"in $?"pagehide":"unload";addEventListener(e,ae,!1)}}function ae(){for(let e in z.requests)z.requests.hasOwnProperty(e)&&z.requests[e].abort()}const wn=(function(){const e=Te({xdomain:!1});return e&&e.responseType!==null})();class vn extends yn{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=wn&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new z(Te,this.uri(),t)}}function Te(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||mn))return new XMLHttpRequest}catch{}if(!t)try{return new $[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Le=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class bn extends Jt{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=Le?{}:Oe(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;Xt(s,this.supportsBinary,r=>{try{this.doWrite(s,r)}catch{}i&&Ct(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=ke()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Nt=$.WebSocket||$.MozWebSocket;class _n extends bn{createSocket(t,n,s){return Le?new Nt(t,n,s):n?new Nt(t,n):new Nt(t)}doWrite(t,n){this.ws.send(n)}}class xn extends Jt{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=nn(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),i=en();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const r=()=>{s.read().then(({done:c,value:a})=>{c||(this.onPacket(a),r())}).catch(c=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],i=n===t.length-1;this._writer.write(s).then(()=>{i&&Ct(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Rn={websocket:_n,webtransport:xn,polling:vn},En=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,An=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function It(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let i=En.exec(e||""),r={},o=14;for(;o--;)r[An[o]]=i[o]||"";return n!=-1&&s!=-1&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=Cn(r,r.path),r.queryKey=On(r,r.query),r}function Cn(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function On(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,r){i&&(n[i]=r)}),n}const Vt=typeof addEventListener=="function"&&typeof removeEventListener=="function",wt=[];Vt&&addEventListener("offline",()=>{wt.forEach(e=>e())},!1);class Z extends L{constructor(t,n){if(super(),this.binaryType=rn,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=It(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=It(n.host).host);Ot(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=hn(this.opts.query)),Vt&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},wt.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Ce,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Z.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Z.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(n+=ln(i)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Ct(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,i){if(typeof n=="function"&&(i=n,n=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const r={type:t,data:n,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Z.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Vt&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=wt.indexOf(this._offlineEventListener);s!==-1&&wt.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Z.protocol=Ce;class kn extends Z{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;Z.priorWebsocketSuccess=!1;const i=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!s)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Z.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(l(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const p=new Error("probe error");p.transport=n.name,this.emitReserved("upgradeError",p)}}))};function r(){s||(s=!0,l(),n.close(),n=null)}const o=d=>{const p=new Error("probe error: "+d);p.transport=n.name,r(),this.emitReserved("upgradeError",p)};function c(){o("transport closed")}function a(){o("socket closed")}function f(d){n&&d.name!==n.name&&r()}const l=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",c),this.off("close",a),this.off("upgrading",f)};n.once("open",i),n.once("error",o),n.once("close",c),this.once("close",a),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let Sn=class extends kn{constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>Rn[i]).filter(i=>!!i)),super(t,s)}};function Tn(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=It(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const r=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+r+":"+s.port+t,s.href=s.protocol+"://"+r+(n&&n.port===s.port?"":":"+s.port),s}const Ln=typeof ArrayBuffer=="function",Bn=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Be=Object.prototype.toString,Pn=typeof Blob=="function"||typeof Blob<"u"&&Be.call(Blob)==="[object BlobConstructor]",Nn=typeof File=="function"||typeof File<"u"&&Be.call(File)==="[object FileConstructor]";function Qt(e){return Ln&&(e instanceof ArrayBuffer||Bn(e))||Pn&&e instanceof Blob||Nn&&e instanceof File}function vt(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(vt(e[n]))return!0;return!1}if(Qt(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return vt(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&vt(e[n]))return!0;return!1}function Dn(e){const t=[],n=e.data,s=e;return s.data=Wt(n,t),s.attachments=t.length,{packet:s,buffers:t}}function Wt(e,t){if(!e)return e;if(Qt(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=Wt(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=Wt(e[s],t));return n}return e}function Mn(e,t){return e.data=$t(e.data,t),delete e.attachments,e}function $t(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=$t(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=$t(e[n],t));return e}const Fn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],qn=5;var R;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(R||(R={}));class In{constructor(t){this.replacer=t}encode(t){return(t.type===R.EVENT||t.type===R.ACK)&&vt(t)?this.encodeAsBinary({type:t.type===R.EVENT?R.BINARY_EVENT:R.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===R.BINARY_EVENT||t.type===R.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Dn(t),s=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(s),i}}function le(e){return Object.prototype.toString.call(e)==="[object Object]"}class Gt extends L{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===R.BINARY_EVENT;s||n.type===R.BINARY_ACK?(n.type=s?R.EVENT:R.ACK,this.reconstructor=new Vn(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Qt(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(R[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===R.BINARY_EVENT||s.type===R.BINARY_ACK){const r=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(r,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(n+1)==="/"){const r=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(r,n)}else s.nsp="/";const i=t.charAt(n+1);if(i!==""&&Number(i)==i){const r=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}s.id=Number(t.substring(r,n+1))}if(t.charAt(++n)){const r=this.tryParse(t.substr(n));if(Gt.isPayloadValid(s.type,r))s.data=r;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case R.CONNECT:return le(n);case R.DISCONNECT:return n===void 0;case R.CONNECT_ERROR:return typeof n=="string"||le(n);case R.EVENT:case R.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Fn.indexOf(n[0])===-1);case R.ACK:case R.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Vn{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Mn(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Wn=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Gt,Encoder:In,get PacketType(){return R},protocol:qn},Symbol.toStringTag,{value:"Module"}));function H(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const $n=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Pe extends L{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[H(t,"open",this.onopen.bind(this)),H(t,"packet",this.onpacket.bind(this)),H(t,"error",this.onerror.bind(this)),H(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,i,r;if($n.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:R.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const l=this.ids++,d=n.pop();this._registerAckCallback(l,d),o.id=l}const c=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,a=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!c||(a?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[t]=n;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let c=0;c<this.sendBuffer.length;c++)this.sendBuffer[c].id===t&&this.sendBuffer.splice(c,1);n.call(this,new Error("operation has timed out"))},i),o=(...c)=>{this.io.clearTimeoutFn(r),n.apply(this,c)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((s,i)=>{const r=(o,c)=>o?i(o):s(c);r.withError=!0,n.push(r),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...r)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...r)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:R.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case R.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case R.EVENT:case R.BINARY_EVENT:this.onevent(t);break;case R.ACK:case R.BINARY_ACK:this.onack(t);break;case R.DISCONNECT:this.ondisconnect();break;case R.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...i){s||(s=!0,n.packet({type:R.ACK,id:t,data:i}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:R.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function ot(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ot.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-n:e+n}return Math.min(e,this.max)|0};ot.prototype.reset=function(){this.attempts=0};ot.prototype.setMin=function(e){this.ms=e};ot.prototype.setMax=function(e){this.max=e};ot.prototype.setJitter=function(e){this.jitter=e};class Ut extends L{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Ot(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new ot({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const i=n.parser||Wn;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Sn(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=H(n,"open",function(){s.onopen(),t&&t()}),r=c=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",c),t?t(c):this.maybeReconnectOnOpen()},o=H(n,"error",r);if(this._timeout!==!1){const c=this._timeout,a=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),n.close()},c);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(H(t,"ping",this.onping.bind(this)),H(t,"data",this.ondata.bind(this)),H(t,"error",this.onerror.bind(this)),H(t,"close",this.onclose.bind(this)),H(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){Ct(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Pe(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ft={};function Dt(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Tn(e,t.path||"/socket.io"),s=n.source,i=n.id,r=n.path,o=ft[i]&&r in ft[i].nsps,c=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let a;return c?a=new Ut(s,t):(ft[i]||(ft[i]=new Ut(s,t)),a=ft[i]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Dt,{Manager:Ut,Socket:Pe,io:Dt,connect:Dt});const J=new Uint32Array(65536),Un=(e,t)=>{const n=e.length,s=t.length,i=1<<n-1;let r=-1,o=0,c=n,a=n;for(;a--;)J[e.charCodeAt(a)]|=1<<a;for(a=0;a<s;a++){let f=J[t.charCodeAt(a)];const l=f|o;f|=(f&r)+r^r,o|=~(f|r),r&=f,o&i&&c++,r&i&&c--,o=o<<1|1,r=r<<1|~(l|o),o&=l}for(a=n;a--;)J[e.charCodeAt(a)]=0;return c},Hn=(e,t)=>{const n=t.length,s=e.length,i=[],r=[],o=Math.ceil(n/32),c=Math.ceil(s/32);for(let h=0;h<o;h++)r[h]=-1,i[h]=0;let a=0;for(;a<c-1;a++){let h=0,g=-1;const v=a*32,y=Math.min(32,s)+v;for(let m=v;m<y;m++)J[e.charCodeAt(m)]|=1<<m;for(let m=0;m<n;m++){const w=J[t.charCodeAt(m)],_=r[m/32|0]>>>m&1,x=i[m/32|0]>>>m&1,O=w|h,E=((w|x)&g)+g^g|w|x;let C=h|~(E|g),T=g&E;C>>>31^_&&(r[m/32|0]^=1<<m),T>>>31^x&&(i[m/32|0]^=1<<m),C=C<<1|_,T=T<<1|x,g=T|~(O|C),h=C&O}for(let m=v;m<y;m++)J[e.charCodeAt(m)]=0}let f=0,l=-1;const d=a*32,p=Math.min(32,s-d)+d;for(let h=d;h<p;h++)J[e.charCodeAt(h)]|=1<<h;let u=s;for(let h=0;h<n;h++){const g=J[t.charCodeAt(h)],v=r[h/32|0]>>>h&1,y=i[h/32|0]>>>h&1,m=g|f,w=((g|y)&l)+l^l|g|y;let _=f|~(w|l),x=l&w;u+=_>>>s-1&1,u-=x>>>s-1&1,_>>>31^v&&(r[h/32|0]^=1<<h),x>>>31^y&&(i[h/32|0]^=1<<h),_=_<<1|v,x=x<<1|y,l=x|~(m|_),f=_&m}for(let h=d;h<p;h++)J[e.charCodeAt(h)]=0;return u},ri=(e,t)=>{if(e.length<t.length){const n=t;t=e,e=n}return t.length===0?e.length:e.length<=32?Un(e,t):Hn(e,t)};function kt(){return typeof window<"u"}function ct(e){return Ne(e)?(e.nodeName||"").toLowerCase():"#document"}function V(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function j(e){var t;return(t=(Ne(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ne(e){return kt()?e instanceof Node||e instanceof V(e).Node:!1}function q(e){return kt()?e instanceof Element||e instanceof V(e).Element:!1}function X(e){return kt()?e instanceof HTMLElement||e instanceof V(e).HTMLElement:!1}function fe(e){return!kt()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof V(e).ShadowRoot}const zn=new Set(["inline","contents"]);function dt(e){const{overflow:t,overflowX:n,overflowY:s,display:i}=U(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+n)&&!zn.has(i)}const Yn=new Set(["table","td","th"]);function Kn(e){return Yn.has(ct(e))}const Xn=[":popover-open",":modal"];function St(e){return Xn.some(t=>{try{return e.matches(t)}catch{return!1}})}const jn=["transform","translate","scale","rotate","perspective"],Jn=["transform","translate","scale","rotate","perspective","filter"],Qn=["paint","layout","strict","content"];function Zt(e){const t=te(),n=q(e)?U(e):e;return jn.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||Jn.some(s=>(n.willChange||"").includes(s))||Qn.some(s=>(n.contain||"").includes(s))}function Gn(e){let t=tt(e);for(;X(t)&&!rt(t);){if(Zt(t))return t;if(St(t))return null;t=tt(t)}return null}function te(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Zn=new Set(["html","body","#document"]);function rt(e){return Zn.has(ct(e))}function U(e){return V(e).getComputedStyle(e)}function Tt(e){return q(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function tt(e){if(ct(e)==="html")return e;const t=e.assignedSlot||e.parentNode||fe(e)&&e.host||j(e);return fe(t)?t.host:t}function De(e){const t=tt(e);return rt(t)?e.ownerDocument?e.ownerDocument.body:e.body:X(t)&&dt(t)?t:De(t)}function ht(e,t,n){var s;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=De(e),r=i===((s=e.ownerDocument)==null?void 0:s.body),o=V(i);if(r){const c=Ht(o);return t.concat(o,o.visualViewport||[],dt(i)?i:[],c&&n?ht(c):[])}return t.concat(i,ht(i,[],n))}function Ht(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}const et=Math.min,I=Math.max,_t=Math.round,gt=Math.floor,Y=e=>({x:e,y:e}),ts={left:"right",right:"left",bottom:"top",top:"bottom"},es={start:"end",end:"start"};function zt(e,t,n){return I(e,et(t,n))}function at(e,t){return typeof e=="function"?e(t):e}function nt(e){return e.split("-")[0]}function lt(e){return e.split("-")[1]}function Me(e){return e==="x"?"y":"x"}function ee(e){return e==="y"?"height":"width"}const ns=new Set(["top","bottom"]);function Q(e){return ns.has(nt(e))?"y":"x"}function ne(e){return Me(Q(e))}function ss(e,t,n){n===void 0&&(n=!1);const s=lt(e),i=ne(e),r=ee(i);let o=i==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(o=xt(o)),[o,xt(o)]}function is(e){const t=xt(e);return[Yt(e),t,Yt(t)]}function Yt(e){return e.replace(/start|end/g,t=>es[t])}const ue=["left","right"],he=["right","left"],rs=["top","bottom"],os=["bottom","top"];function cs(e,t,n){switch(e){case"top":case"bottom":return n?t?he:ue:t?ue:he;case"left":case"right":return t?rs:os;default:return[]}}function as(e,t,n,s){const i=lt(e);let r=cs(nt(e),n==="start",s);return i&&(r=r.map(o=>o+"-"+i),t&&(r=r.concat(r.map(Yt)))),r}function xt(e){return e.replace(/left|right|bottom|top/g,t=>ts[t])}function ls(e){return{top:0,right:0,bottom:0,left:0,...e}}function Fe(e){return typeof e!="number"?ls(e):{top:e,right:e,bottom:e,left:e}}function Rt(e){const{x:t,y:n,width:s,height:i}=e;return{width:s,height:i,top:n,left:t,right:t+s,bottom:n+i,x:t,y:n}}function de(e,t,n){let{reference:s,floating:i}=e;const r=Q(t),o=ne(t),c=ee(o),a=nt(t),f=r==="y",l=s.x+s.width/2-i.width/2,d=s.y+s.height/2-i.height/2,p=s[c]/2-i[c]/2;let u;switch(a){case"top":u={x:l,y:s.y-i.height};break;case"bottom":u={x:l,y:s.y+s.height};break;case"right":u={x:s.x+s.width,y:d};break;case"left":u={x:s.x-i.width,y:d};break;default:u={x:s.x,y:s.y}}switch(lt(t)){case"start":u[o]-=p*(n&&f?-1:1);break;case"end":u[o]+=p*(n&&f?-1:1);break}return u}const fs=async(e,t,n)=>{const{placement:s="bottom",strategy:i="absolute",middleware:r=[],platform:o}=n,c=r.filter(Boolean),a=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:l,y:d}=de(f,s,a),p=s,u={},h=0;for(let g=0;g<c.length;g++){const{name:v,fn:y}=c[g],{x:m,y:w,data:_,reset:x}=await y({x:l,y:d,initialPlacement:s,placement:p,strategy:i,middlewareData:u,rects:f,platform:o,elements:{reference:e,floating:t}});l=m??l,d=w??d,u={...u,[v]:{...u[v],..._}},x&&h<=50&&(h++,typeof x=="object"&&(x.placement&&(p=x.placement),x.rects&&(f=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:l,y:d}=de(f,p,a)),g=-1)}return{x:l,y:d,placement:p,strategy:i,middlewareData:u}};async function se(e,t){var n;t===void 0&&(t={});const{x:s,y:i,platform:r,rects:o,elements:c,strategy:a}=e,{boundary:f="clippingAncestors",rootBoundary:l="viewport",elementContext:d="floating",altBoundary:p=!1,padding:u=0}=at(t,e),h=Fe(u),v=c[p?d==="floating"?"reference":"floating":d],y=Rt(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(v)))==null||n?v:v.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:f,rootBoundary:l,strategy:a})),m=d==="floating"?{x:s,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),_=await(r.isElement==null?void 0:r.isElement(w))?await(r.getScale==null?void 0:r.getScale(w))||{x:1,y:1}:{x:1,y:1},x=Rt(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:m,offsetParent:w,strategy:a}):m);return{top:(y.top-x.top+h.top)/_.y,bottom:(x.bottom-y.bottom+h.bottom)/_.y,left:(y.left-x.left+h.left)/_.x,right:(x.right-y.right+h.right)/_.x}}const us=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:s,placement:i,rects:r,platform:o,elements:c,middlewareData:a}=t,{element:f,padding:l=0}=at(e,t)||{};if(f==null)return{};const d=Fe(l),p={x:n,y:s},u=ne(i),h=ee(u),g=await o.getDimensions(f),v=u==="y",y=v?"top":"left",m=v?"bottom":"right",w=v?"clientHeight":"clientWidth",_=r.reference[h]+r.reference[u]-p[u]-r.floating[h],x=p[u]-r.reference[u],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let E=O?O[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(O)))&&(E=c.floating[w]||r.floating[h]);const C=_/2-x/2,T=E/2-g[h]/2-1,B=et(d[y],T),F=et(d[m],T),S=B,D=E-g[h]-F,k=E/2-g[h]/2+C,W=zt(S,k,D),P=!a.arrow&&lt(i)!=null&&k!==W&&r.reference[h]/2-(k<S?B:F)-g[h]/2<0,N=P?k<S?k-S:k-D:0;return{[u]:p[u]+N,data:{[u]:W,centerOffset:k-W-N,...P&&{alignmentOffset:N}},reset:P}}}),hs=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,s;const{placement:i,middlewareData:r,rects:o,initialPlacement:c,platform:a,elements:f}=t,{mainAxis:l=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:g=!0,...v}=at(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const y=nt(i),m=Q(c),w=nt(c)===c,_=await(a.isRTL==null?void 0:a.isRTL(f.floating)),x=p||(w||!g?[xt(c)]:is(c)),O=h!=="none";!p&&O&&x.push(...as(c,g,h,_));const E=[c,...x],C=await se(t,v),T=[];let B=((s=r.flip)==null?void 0:s.overflows)||[];if(l&&T.push(C[y]),d){const k=ss(i,o,_);T.push(C[k[0]],C[k[1]])}if(B=[...B,{placement:i,overflows:T}],!T.every(k=>k<=0)){var F,S;const k=(((F=r.flip)==null?void 0:F.index)||0)+1,W=E[k];if(W&&(!(d==="alignment"?m!==Q(W):!1)||B.every(A=>Q(A.placement)===m?A.overflows[0]>0:!0)))return{data:{index:k,overflows:B},reset:{placement:W}};let P=(S=B.filter(N=>N.overflows[0]<=0).sort((N,A)=>N.overflows[1]-A.overflows[1])[0])==null?void 0:S.placement;if(!P)switch(u){case"bestFit":{var D;const N=(D=B.filter(A=>{if(O){const M=Q(A.placement);return M===m||M==="y"}return!0}).map(A=>[A.placement,A.overflows.filter(M=>M>0).reduce((M,G)=>M+G,0)]).sort((A,M)=>A[1]-M[1])[0])==null?void 0:D[0];N&&(P=N);break}case"initialPlacement":P=c;break}if(i!==P)return{reset:{placement:P}}}return{}}}},ds=new Set(["left","top"]);async function ps(e,t){const{placement:n,platform:s,elements:i}=e,r=await(s.isRTL==null?void 0:s.isRTL(i.floating)),o=nt(n),c=lt(n),a=Q(n)==="y",f=ds.has(o)?-1:1,l=r&&a?-1:1,d=at(t,e);let{mainAxis:p,crossAxis:u,alignmentAxis:h}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return c&&typeof h=="number"&&(u=c==="end"?h*-1:h),a?{x:u*l,y:p*f}:{x:p*f,y:u*l}}const ms=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,s;const{x:i,y:r,placement:o,middlewareData:c}=t,a=await ps(t,e);return o===((n=c.offset)==null?void 0:n.placement)&&(s=c.arrow)!=null&&s.alignmentOffset?{}:{x:i+a.x,y:r+a.y,data:{...a,placement:o}}}}},gs=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:s,placement:i}=t,{mainAxis:r=!0,crossAxis:o=!1,limiter:c={fn:v=>{let{x:y,y:m}=v;return{x:y,y:m}}},...a}=at(e,t),f={x:n,y:s},l=await se(t,a),d=Q(nt(i)),p=Me(d);let u=f[p],h=f[d];if(r){const v=p==="y"?"top":"left",y=p==="y"?"bottom":"right",m=u+l[v],w=u-l[y];u=zt(m,u,w)}if(o){const v=d==="y"?"top":"left",y=d==="y"?"bottom":"right",m=h+l[v],w=h-l[y];h=zt(m,h,w)}const g=c.fn({...t,[p]:u,[d]:h});return{...g,data:{x:g.x-n,y:g.y-s,enabled:{[p]:r,[d]:o}}}}}},ys=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,s;const{placement:i,rects:r,platform:o,elements:c}=t,{apply:a=()=>{},...f}=at(e,t),l=await se(t,f),d=nt(i),p=lt(i),u=Q(i)==="y",{width:h,height:g}=r.floating;let v,y;d==="top"||d==="bottom"?(v=d,y=p===(await(o.isRTL==null?void 0:o.isRTL(c.floating))?"start":"end")?"left":"right"):(y=d,v=p==="end"?"top":"bottom");const m=g-l.top-l.bottom,w=h-l.left-l.right,_=et(g-l[v],m),x=et(h-l[y],w),O=!t.middlewareData.shift;let E=_,C=x;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(C=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(E=m),O&&!p){const B=I(l.left,0),F=I(l.right,0),S=I(l.top,0),D=I(l.bottom,0);u?C=h-2*(B!==0||F!==0?B+F:I(l.left,l.right)):E=g-2*(S!==0||D!==0?S+D:I(l.top,l.bottom))}await a({...t,availableWidth:C,availableHeight:E});const T=await o.getDimensions(c.floating);return h!==T.width||g!==T.height?{reset:{rects:!0}}:{}}}};function qe(e){const t=U(e);let n=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const i=X(e),r=i?e.offsetWidth:n,o=i?e.offsetHeight:s,c=_t(n)!==r||_t(s)!==o;return c&&(n=r,s=o),{width:n,height:s,$:c}}function ie(e){return q(e)?e:e.contextElement}function it(e){const t=ie(e);if(!X(t))return Y(1);const n=t.getBoundingClientRect(),{width:s,height:i,$:r}=qe(t);let o=(r?_t(n.width):n.width)/s,c=(r?_t(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const ws=Y(0);function Ie(e){const t=V(e);return!te()||!t.visualViewport?ws:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function vs(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==V(e)?!1:t}function st(e,t,n,s){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=ie(e);let o=Y(1);t&&(s?q(s)&&(o=it(s)):o=it(e));const c=vs(r,n,s)?Ie(r):Y(0);let a=(i.left+c.x)/o.x,f=(i.top+c.y)/o.y,l=i.width/o.x,d=i.height/o.y;if(r){const p=V(r),u=s&&q(s)?V(s):s;let h=p,g=Ht(h);for(;g&&s&&u!==h;){const v=it(g),y=g.getBoundingClientRect(),m=U(g),w=y.left+(g.clientLeft+parseFloat(m.paddingLeft))*v.x,_=y.top+(g.clientTop+parseFloat(m.paddingTop))*v.y;a*=v.x,f*=v.y,l*=v.x,d*=v.y,a+=w,f+=_,h=V(g),g=Ht(h)}}return Rt({width:l,height:d,x:a,y:f})}function Lt(e,t){const n=Tt(e).scrollLeft;return t?t.left+n:st(j(e)).left+n}function Ve(e,t){const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-Lt(e,n),i=n.top+t.scrollTop;return{x:s,y:i}}function bs(e){let{elements:t,rect:n,offsetParent:s,strategy:i}=e;const r=i==="fixed",o=j(s),c=t?St(t.floating):!1;if(s===o||c&&r)return n;let a={scrollLeft:0,scrollTop:0},f=Y(1);const l=Y(0),d=X(s);if((d||!d&&!r)&&((ct(s)!=="body"||dt(o))&&(a=Tt(s)),X(s))){const u=st(s);f=it(s),l.x=u.x+s.clientLeft,l.y=u.y+s.clientTop}const p=o&&!d&&!r?Ve(o,a):Y(0);return{width:n.width*f.x,height:n.height*f.y,x:n.x*f.x-a.scrollLeft*f.x+l.x+p.x,y:n.y*f.y-a.scrollTop*f.y+l.y+p.y}}function _s(e){return Array.from(e.getClientRects())}function xs(e){const t=j(e),n=Tt(e),s=e.ownerDocument.body,i=I(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),r=I(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-n.scrollLeft+Lt(e);const c=-n.scrollTop;return U(s).direction==="rtl"&&(o+=I(t.clientWidth,s.clientWidth)-i),{width:i,height:r,x:o,y:c}}const pe=25;function Rs(e,t){const n=V(e),s=j(e),i=n.visualViewport;let r=s.clientWidth,o=s.clientHeight,c=0,a=0;if(i){r=i.width,o=i.height;const l=te();(!l||l&&t==="fixed")&&(c=i.offsetLeft,a=i.offsetTop)}const f=Lt(s);if(f<=0){const l=s.ownerDocument,d=l.body,p=getComputedStyle(d),u=l.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,h=Math.abs(s.clientWidth-d.clientWidth-u);h<=pe&&(r-=h)}else f<=pe&&(r+=f);return{width:r,height:o,x:c,y:a}}const Es=new Set(["absolute","fixed"]);function As(e,t){const n=st(e,!0,t==="fixed"),s=n.top+e.clientTop,i=n.left+e.clientLeft,r=X(e)?it(e):Y(1),o=e.clientWidth*r.x,c=e.clientHeight*r.y,a=i*r.x,f=s*r.y;return{width:o,height:c,x:a,y:f}}function me(e,t,n){let s;if(t==="viewport")s=Rs(e,n);else if(t==="document")s=xs(j(e));else if(q(t))s=As(t,n);else{const i=Ie(e);s={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Rt(s)}function We(e,t){const n=tt(e);return n===t||!q(n)||rt(n)?!1:U(n).position==="fixed"||We(n,t)}function Cs(e,t){const n=t.get(e);if(n)return n;let s=ht(e,[],!1).filter(c=>q(c)&&ct(c)!=="body"),i=null;const r=U(e).position==="fixed";let o=r?tt(e):e;for(;q(o)&&!rt(o);){const c=U(o),a=Zt(o);!a&&c.position==="fixed"&&(i=null),(r?!a&&!i:!a&&c.position==="static"&&!!i&&Es.has(i.position)||dt(o)&&!a&&We(e,o))?s=s.filter(l=>l!==o):i=c,o=tt(o)}return t.set(e,s),s}function Os(e){let{element:t,boundary:n,rootBoundary:s,strategy:i}=e;const o=[...n==="clippingAncestors"?St(t)?[]:Cs(t,this._c):[].concat(n),s],c=o[0],a=o.reduce((f,l)=>{const d=me(t,l,i);return f.top=I(d.top,f.top),f.right=et(d.right,f.right),f.bottom=et(d.bottom,f.bottom),f.left=I(d.left,f.left),f},me(t,c,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function ks(e){const{width:t,height:n}=qe(e);return{width:t,height:n}}function Ss(e,t,n){const s=X(t),i=j(t),r=n==="fixed",o=st(e,!0,r,t);let c={scrollLeft:0,scrollTop:0};const a=Y(0);function f(){a.x=Lt(i)}if(s||!s&&!r)if((ct(t)!=="body"||dt(i))&&(c=Tt(t)),s){const u=st(t,!0,r,t);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else i&&f();r&&!s&&i&&f();const l=i&&!s&&!r?Ve(i,c):Y(0),d=o.left+c.scrollLeft-a.x-l.x,p=o.top+c.scrollTop-a.y-l.y;return{x:d,y:p,width:o.width,height:o.height}}function Mt(e){return U(e).position==="static"}function ge(e,t){if(!X(e)||U(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return j(e)===n&&(n=n.ownerDocument.body),n}function $e(e,t){const n=V(e);if(St(e))return n;if(!X(e)){let i=tt(e);for(;i&&!rt(i);){if(q(i)&&!Mt(i))return i;i=tt(i)}return n}let s=ge(e,t);for(;s&&Kn(s)&&Mt(s);)s=ge(s,t);return s&&rt(s)&&Mt(s)&&!Zt(s)?n:s||Gn(e)||n}const Ts=async function(e){const t=this.getOffsetParent||$e,n=this.getDimensions,s=await n(e.floating);return{reference:Ss(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function Ls(e){return U(e).direction==="rtl"}const Bs={convertOffsetParentRelativeRectToViewportRelativeRect:bs,getDocumentElement:j,getClippingRect:Os,getOffsetParent:$e,getElementRects:Ts,getClientRects:_s,getDimensions:ks,getScale:it,isElement:q,isRTL:Ls};function Ue(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ps(e,t){let n=null,s;const i=j(e);function r(){var c;clearTimeout(s),(c=n)==null||c.disconnect(),n=null}function o(c,a){c===void 0&&(c=!1),a===void 0&&(a=1),r();const f=e.getBoundingClientRect(),{left:l,top:d,width:p,height:u}=f;if(c||t(),!p||!u)return;const h=gt(d),g=gt(i.clientWidth-(l+p)),v=gt(i.clientHeight-(d+u)),y=gt(l),w={rootMargin:-h+"px "+-g+"px "+-v+"px "+-y+"px",threshold:I(0,et(1,a))||1};let _=!0;function x(O){const E=O[0].intersectionRatio;if(E!==a){if(!_)return o();E?o(!1,E):s=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!Ue(f,e.getBoundingClientRect())&&o(),_=!1}try{n=new IntersectionObserver(x,{...w,root:i.ownerDocument})}catch{n=new IntersectionObserver(x,w)}n.observe(e)}return o(!0),r}function oi(e,t,n,s){s===void 0&&(s={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:a=!1}=s,f=ie(e),l=i||r?[...f?ht(f):[],...ht(t)]:[];l.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),r&&y.addEventListener("resize",n)});const d=f&&c?Ps(f,n):null;let p=-1,u=null;o&&(u=new ResizeObserver(y=>{let[m]=y;m&&m.target===f&&u&&(u.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var w;(w=u)==null||w.observe(t)})),n()}),f&&!a&&u.observe(f),u.observe(t));let h,g=a?st(e):null;a&&v();function v(){const y=st(e);g&&!Ue(g,y)&&n(),g=y,h=requestAnimationFrame(v)}return n(),()=>{var y;l.forEach(m=>{i&&m.removeEventListener("scroll",n),r&&m.removeEventListener("resize",n)}),d==null||d(),(y=u)==null||y.disconnect(),u=null,a&&cancelAnimationFrame(h)}}const Ns=ms,Ds=gs,Ms=hs,Fs=ys,ye=us,qs=(e,t,n)=>{const s=new Map,i={platform:Bs,...n},r={...i.platform,_c:s};return fs(e,t,{...i,platform:r})};var Is=typeof document<"u",Vs=function(){},bt=Is?b.useLayoutEffect:Vs;function Et(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,s,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(s=n;s--!==0;)if(!Et(e[s],t[s]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(t,i[s]))return!1;for(s=n;s--!==0;){const r=i[s];if(!(r==="_owner"&&e.$$typeof)&&!Et(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function He(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function we(e,t){const n=He(e);return Math.round(t*n)/n}function Ft(e){const t=b.useRef(e);return bt(()=>{t.current=e}),t}function Ws(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:s=[],platform:i,elements:{reference:r,floating:o}={},transform:c=!0,whileElementsMounted:a,open:f}=e,[l,d]=b.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,u]=b.useState(s);Et(p,s)||u(s);const[h,g]=b.useState(null),[v,y]=b.useState(null),m=b.useCallback(A=>{A!==O.current&&(O.current=A,g(A))},[]),w=b.useCallback(A=>{A!==E.current&&(E.current=A,y(A))},[]),_=r||h,x=o||v,O=b.useRef(null),E=b.useRef(null),C=b.useRef(l),T=a!=null,B=Ft(a),F=Ft(i),S=Ft(f),D=b.useCallback(()=>{if(!O.current||!E.current)return;const A={placement:t,strategy:n,middleware:p};F.current&&(A.platform=F.current),qs(O.current,E.current,A).then(M=>{const G={...M,isPositioned:S.current!==!1};k.current&&!Et(C.current,G)&&(C.current=G,Xe.flushSync(()=>{d(G)}))})},[p,t,n,F,S]);bt(()=>{f===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(A=>({...A,isPositioned:!1})))},[f]);const k=b.useRef(!1);bt(()=>(k.current=!0,()=>{k.current=!1}),[]),bt(()=>{if(_&&(O.current=_),x&&(E.current=x),_&&x){if(B.current)return B.current(_,x,D);D()}},[_,x,D,B,T]);const W=b.useMemo(()=>({reference:O,floating:E,setReference:m,setFloating:w}),[m,w]),P=b.useMemo(()=>({reference:_,floating:x}),[_,x]),N=b.useMemo(()=>{const A={position:n,left:0,top:0};if(!P.floating)return A;const M=we(P.floating,l.x),G=we(P.floating,l.y);return c?{...A,transform:"translate("+M+"px, "+G+"px)",...He(P.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:G}},[n,c,P.floating,l.x,l.y]);return b.useMemo(()=>({...l,update:D,refs:W,elements:P,floatingStyles:N}),[l,D,W,P,N])}const $s=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:s,padding:i}=typeof e=="function"?e(n):e;return s&&t(s)?s.current!=null?ye({element:s.current,padding:i}).fn(n):{}:s?ye({element:s,padding:i}).fn(n):{}}}},ci=(e,t)=>({...Ns(e),options:[e,t]}),ai=(e,t)=>({...Ds(e),options:[e,t]}),li=(e,t)=>({...Ms(e),options:[e,t]}),fi=(e,t)=>({...Fs(e),options:[e,t]}),ui=(e,t)=>({...$s(e),options:[e,t]}),ze={...Ke},Us=ze.useInsertionEffect,Hs=Us||(e=>e());function zs(e){const t=b.useRef(()=>{});return Hs(()=>{t.current=e}),b.useCallback(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t.current==null?void 0:t.current(...s)},[])}var At=typeof document<"u"?b.useLayoutEffect:b.useEffect;function Kt(){return Kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Kt.apply(this,arguments)}let ve=!1,Ys=0;const be=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ys++;function Ks(){const[e,t]=b.useState(()=>ve?be():void 0);return At(()=>{e==null&&t(be())},[]),b.useEffect(()=>{ve=!0},[]),e}const Xs=ze.useId,Ye=Xs||Ks,hi=b.forwardRef(function(t,n){const{context:{placement:s,elements:{floating:i},middlewareData:{arrow:r,shift:o}},width:c=14,height:a=7,tipRadius:f=0,strokeWidth:l=0,staticOffset:d,stroke:p,d:u,style:{transform:h,...g}={},...v}=t,y=Ye(),[m,w]=b.useState(!1);if(At(()=>{if(!i)return;U(i).direction==="rtl"&&w(!0)},[i]),!i)return null;const[_,x]=s.split("-"),O=_==="top"||_==="bottom";let E=d;(O&&o!=null&&o.x||!O&&o!=null&&o.y)&&(E=null);const C=l*2,T=C/2,B=c/2*(f/-8+1),F=a/2*f/4,S=!!u,D=E&&x==="end"?"bottom":"top";let k=E&&x==="end"?"right":"left";E&&m&&(k=x==="end"?"left":"right");const W=(r==null?void 0:r.x)!=null?E||r.x:"",P=(r==null?void 0:r.y)!=null?E||r.y:"",N=u||"M0,0"+(" H"+c)+(" L"+(c-B)+","+(a-F))+(" Q"+c/2+","+a+" "+B+","+(a-F))+" Z",A={top:S?"rotate(180deg)":"",left:S?"rotate(90deg)":"rotate(-90deg)",bottom:S?"":"rotate(180deg)",right:S?"rotate(-90deg)":"rotate(90deg)"}[_];return b.createElement("svg",Kt({},v,{"aria-hidden":!0,ref:n,width:S?c:c+C,height:c,viewBox:"0 0 "+c+" "+(a>c?a:c),style:{position:"absolute",pointerEvents:"none",[k]:W,[D]:P,[_]:O||S?"100%":"calc(100% - "+C/2+"px)",transform:[A,h].filter(M=>!!M).join(" "),...g}}),C>0&&b.createElement("path",{clipPath:"url(#"+y+")",fill:"none",stroke:p,strokeWidth:C+(u?0:1),d:N}),b.createElement("path",{stroke:C&&!u?v.fill:"none",d:N}),b.createElement("clipPath",{id:y},b.createElement("rect",{x:-T,y:T*(S?-1:1),width:c+C,height:c})))});function js(){const e=new Map;return{emit(t,n){var s;(s=e.get(t))==null||s.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var s;e.set(t,((s=e.get(t))==null?void 0:s.filter(i=>i!==n))||[])}}}const Js=b.createContext(null),Qs=b.createContext(null),Gs=()=>{var e;return((e=b.useContext(Js))==null?void 0:e.id)||null},Zs=()=>b.useContext(Qs);function ti(e){const{open:t=!1,onOpenChange:n,elements:s}=e,i=Ye(),r=b.useRef({}),[o]=b.useState(()=>js()),c=Gs()!=null,[a,f]=b.useState(s.reference),l=zs((u,h,g)=>{r.current.openEvent=u?h:void 0,o.emit("openchange",{open:u,event:h,reason:g,nested:c}),n==null||n(u,h,g)}),d=b.useMemo(()=>({setPositionReference:f}),[]),p=b.useMemo(()=>({reference:a||s.reference||null,floating:s.floating||null,domReference:s.reference}),[a,s.reference,s.floating]);return b.useMemo(()=>({dataRef:r,open:t,onOpenChange:l,elements:p,events:o,floatingId:i,refs:d}),[t,l,p,o,i,d])}function di(e){e===void 0&&(e={});const{nodeId:t}=e,n=ti({...e,elements:{reference:null,floating:null,...e.elements}}),s=e.rootContext||n,i=s.elements,[r,o]=b.useState(null),[c,a]=b.useState(null),l=(i==null?void 0:i.domReference)||r,d=b.useRef(null),p=Zs();At(()=>{l&&(d.current=l)},[l]);const u=Ws({...e,elements:{...i,...c&&{reference:c}}}),h=b.useCallback(w=>{const _=q(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;a(_),u.refs.setReference(_)},[u.refs]),g=b.useCallback(w=>{(q(w)||w===null)&&(d.current=w,o(w)),(q(u.refs.reference.current)||u.refs.reference.current===null||w!==null&&!q(w))&&u.refs.setReference(w)},[u.refs]),v=b.useMemo(()=>({...u.refs,setReference:g,setPositionReference:h,domReference:d}),[u.refs,g,h]),y=b.useMemo(()=>({...u.elements,domReference:l}),[u.elements,l]),m=b.useMemo(()=>({...u,...s,refs:v,elements:y,nodeId:t}),[u,v,y,t,s]);return At(()=>{s.dataRef.current.floatingContext=m;const w=p==null?void 0:p.nodesRef.current.find(_=>_.id===t);w&&(w.context=m)}),b.useMemo(()=>({...u,context:m,refs:v,elements:y}),[u,v,y,m])}var ei="Invariant failed";function pi(e,t){if(!e)throw new Error(ei)}export{hi as F,ui as a,oi as b,fi as c,ri as d,li as f,pi as i,Dt as l,ci as o,ai as s,di as u};
