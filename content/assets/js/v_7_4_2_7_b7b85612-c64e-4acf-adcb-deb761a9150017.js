import{I,j as f,K as x,_ as y}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150010.js";import{a as m}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915004.js";import{u as R}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150019.js";import{a as A}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915006.js";import{V as S}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150018.js";import{c as _}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915007.js";var j=function(o,u,e,a){function t(r){return r instanceof e?r:new e(function(i){i(r)})}return new(e||(e=Promise))(function(r,i){function d(c){try{n(a.next(c))}catch(s){i(s)}}function l(c){try{n(a.throw(c))}catch(s){i(s)}}function n(c){c.done?r(c.value):t(c.value).then(d,l)}n((a=a.apply(o,u||[])).next())})},O=function(o,u){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},a,t,r,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=d(0),i.throw=d(1),i.return=d(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function d(n){return function(c){return l([n,c])}}function l(n){if(a)throw new TypeError("Generator is already executing.");for(;i&&(i=0,n[0]&&(e=0)),e;)try{if(a=1,t&&(r=n[0]&2?t.return:n[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,n[1])).done)return r;switch(t=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,t=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){e.label=n[1];break}if(n[0]===6&&e.label<r[1]){e.label=r[1],r=n;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(n);break}r[2]&&e.ops.pop(),e.trys.pop();continue}n=u.call(o,e)}catch(c){n=[6,c],t=0}finally{a=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},w=function(o){return j(void 0,void 0,void 0,function(){var u,e;return O(this,function(a){switch(a.label){case 0:return u=new FormData,u.append("audio",o),[4,A.post("".concat(S.backend_utils,"api/audio/convert-ptt-file"),u,{headers:{"Content-Type":"multipart/form-data"}})];case 1:return e=a.sent().data,[2,e.base64]}})})},g=function(o,u,e,a){function t(r){return r instanceof e?r:new e(function(i){i(r)})}return new(e||(e=Promise))(function(r,i){function d(c){try{n(a.next(c))}catch(s){i(s)}}function l(c){try{n(a.throw(c))}catch(s){i(s)}}function n(c){c.done?r(c.value):t(c.value).then(d,l)}n((a=a.apply(o,u||[])).next())})},h=function(o,u){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},a,t,r,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=d(0),i.throw=d(1),i.return=d(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function d(n){return function(c){return l([n,c])}}function l(n){if(a)throw new TypeError("Generator is already executing.");for(;i&&(i=0,n[0]&&(e=0)),e;)try{if(a=1,t&&(r=n[0]&2?t.return:n[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,n[1])).done)return r;switch(t=0,r&&(n=[n[0]&2,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return e.label++,{value:n[1],done:!1};case 5:e.label++,t=n[1],n=[0];continue;case 7:n=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(n[0]===6||n[0]===2)){e=0;continue}if(n[0]===3&&(!r||n[1]>r[0]&&n[1]<r[3])){e.label=n[1];break}if(n[0]===6&&e.label<r[1]){e.label=r[1],r=n;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(n);break}r[2]&&e.ops.pop(),e.trys.pop();continue}n=u.call(o,e)}catch(c){n=[6,c],t=0}finally{a=r=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}},E=function(){return _()(function(o,u){return{render:"menu",setRender:function(e){return o({render:e})},audio64:"",setOnBase64:function(){return null},getBase64:function(e){return g(void 0,void 0,void 0,function(){var a,t,r;return h(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),a=e.target.files[0],a.size>50*1024*1024?(I({type:"Error",message:R.getState().language.max_audio_tam,position:"top-right"}),[2]):(o({render:"mp3_convert"}),[4,w(a)]);case 1:return t=i.sent(),o({render:"view",audio64:t}),u().setOnBase64(t),[3,3];case 2:return r=i.sent(),o({render:"menu"}),console.error("Error ao tentar processar o audio IMPORTADO",r),[3,3];case 3:return[2]}})})},removeAudio:function(){return o(function(){return u().setOnBase64(""),{render:"menu",audio64:""}})},stream:null,mediaRecorder:null,recordingStatus:"inactive",timer:0,timerInterval:null,getMicrophonePermission:function(){return g(void 0,void 0,void 0,function(){var e,a;return h(this,function(t){switch(t.label){case 0:if(!("MediaRecorder"in window))return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.mediaDevices.getUserMedia({audio:!0,video:!1})];case 2:return e=t.sent(),o({render:"create",stream:e,recordingStatus:"recording"}),u().startRecording(),[3,4];case 3:return a=t.sent(),alert(a),[3,4];case 4:return[3,6];case 5:alert("The MediaRecorder API is not supported in your browser"),t.label=6;case 6:return[2]}})})},startRecording:function(){var e=u(),a=e.stream,t=e.recordingStatus;if(a){var r="audio/webm",i=new MediaRecorder(a,{mimeType:r});o({recordingStatus:"recording",mediaRecorder:i});var d=[];i.ondataavailable=function(n){n.data.size>0&&d.push(n.data)},i.onstop=function(){return g(void 0,void 0,void 0,function(){var n,c,s,b;return h(this,function(v){switch(v.label){case 0:if(t==="stopped")return[2];o({render:"mp3_convert"}),v.label=1;case 1:return v.trys.push([1,3,4,5]),n=new Blob(d,{type:r}),c=new File([n],"recording.webm",{type:n.type}),[4,w(c)];case 2:return s=v.sent(),o({render:"view",audio64:s}),u().setOnBase64(s),[3,5];case 3:return b=v.sent(),o({render:"menu"}),console.error("erro ao tentar converter o audio em MP3",b),[3,5];case 4:return o({recordingStatus:"stopped",timerInterval:null,timer:0,mediaRecorder:null,stream:null}),[7];case 5:return[2]}})})},i.start();var l=setInterval(function(){o(function(n){return{timer:n.timer+1}})},1e3);o({timerInterval:l})}},finalizarRecording:function(){var e=u(),a=e.mediaRecorder,t=e.recordingStatus,r=e.timerInterval;a&&t==="recording"&&(o({recordingStatus:"inactive"}),a.stop()),r&&(clearInterval(r),o({timerInterval:null,timer:0}))},pauseRecording:function(){var e=u(),a=e.mediaRecorder,t=e.recordingStatus,r=e.timerInterval;a&&t==="recording"&&(o({recordingStatus:"paused"}),a.pause()),r&&(clearInterval(r),o({timerInterval:null}))},resumeRecording:function(){var e=u(),a=e.mediaRecorder,t=e.recordingStatus,r=e.timerInterval;if(a&&t==="paused"&&(o({recordingStatus:"recording"}),a.resume()),!r){var i=setInterval(function(){o(function(d){return{timer:d.timer+1}})},1e3);o({timerInterval:i})}},stopRecording:function(){var e=u().timerInterval;e&&clearInterval(e),o({recordingStatus:"stopped",timerInterval:null,timer:0,mediaRecorder:null,stream:null,render:"menu"})}}})},p=function(){return p=Object.assign||function(o){for(var u,e=1,a=arguments.length;e<a;e++){u=arguments[e];for(var t in u)Object.prototype.hasOwnProperty.call(u,t)&&(o[t]=u[t])}return o},p.apply(this,arguments)},C=_()(function(o,u){return{container:{},idioma:"pt",setIdioma:function(e){return o({idioma:e})},getContainer:function(e){var a=u().container;if(a[e])return a[e];var t=E();return o(function(r){var i;return{container:p(p({},r.container),(i={},i[e]=t,i))}}),t},deleteContainer:function(e){return o(function(a){var t=p({},a.container);return delete t[e],{container:t}})},donwloadAudio:function(e){for(var a=atob(e.split(",")[1]),t=e.split(";")[0].split(":")[1],r=new ArrayBuffer(a.length),i=new Uint8Array(r),d=0;d<a.length;d++)i[d]=a.charCodeAt(d);var l=new Blob([r],{type:t}),n=URL.createObjectURL(l),c=document.createElement("a");c.href=n,c.download="audio_".concat("100000-1000".replace(/[018]/g,function(s){var b=crypto.getRandomValues(new Uint8Array(1))[0]&15>>parseInt(s,10)/4;return(b^parseInt(s,10)).toString(16)}),".mp3"),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(n)}}}),T={aguardeGerarAudio:{pt:"Aguarde",en:"Wait",es:"Esperar"},importarAudio:{pt:"Importar Audio",en:"Import Audio",es:"Importar Audio"},gravarAudio:{pt:"Gravar Audio",en:"Record Audio",es:"Grabar Audio"},excluir:{pt:"Excluir",en:"Delete",es:"Eliminar"},baixar:{pt:"Baixar",en:"Download",es:"Descargar"}},k=m.lazy(function(){return y(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500234.js")),[])}),B=m.lazy(function(){return y(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500235.js")),[])}),M=m.lazy(function(){return y(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500236.js")),[])});function D(o){var u=o.id,e=o.base64,a=o.onBase64,t=o.idioma,r=C(),i=r.getContainer,d=r.deleteContainer,l=r.setIdioma,n=i(u)().render;m.useEffect(function(){l(t)},[t]),m.useEffect(function(){return i(u).setState({render:e&&(e==null?void 0:e.length)!==0?"view":"menu",audio64:e,setOnBase64:a}),function(){d(u)}},[]);var c={menu:f.jsx(k,{id:u}),view:f.jsx(B,{id:u}),create:f.jsx(M,{id:u}),mp3_convert:f.jsxs("div",{className:"flex justify-center gap-1 pb-1 pr-2",children:[f.jsx("span",{className:"loading loading-spinner loading-md text-[var(--primaria)]"}),f.jsx(x,{weight:"600",children:T.aguardeGerarAudio[t]})]})};return f.jsx("aside",{"type-render":"Components","render-name":"audio",children:f.jsx(m.Suspense,{fallback:f.jsx(f.Fragment,{}),children:c[n]})})}const F=Object.freeze(Object.defineProperty({__proto__:null,default:D},Symbol.toStringTag,{value:"Module"}));export{T as L,F as i,C as u};
