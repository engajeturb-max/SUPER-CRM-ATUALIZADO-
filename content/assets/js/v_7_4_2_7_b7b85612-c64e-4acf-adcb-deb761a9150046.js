import{a2 as H,a3 as W,a4 as J,a5 as Y,a6 as K,r as ue,P as u,c as T,I as d,j as a,_ as C,a7 as de,a8 as pe,a9 as fe,aa as me,ab as ge,ac as xe,ad as _e,ae as he,af as be,b as ye}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150010.js";import{f as Ce,g as Ee,u as Q,h as je}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150021.js";import{Q as ve,R as we,O as Se,U as Le,V as Ae,W as Ne,X as ze,Y as ke,Z as X,_ as Z,$ as ee,a0 as Me,a1 as Pe,a2 as ae,a3 as te,a4 as De,a5 as Re,a6 as Te,a7 as Fe,a8 as Ie,a9 as Oe,aa as Ve,ab as Ue,ac as $e,ad as Ge,ae as qe,m as U,n as ne,o as Be,p as $,r as I,H as He,af as We,ag as Je}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150023.js";import{u as y}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150019.js";import{u as Ye}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500107.js";import{a as l}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915004.js";import{C as Ke,u as A}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500108.js";import{c as G}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915007.js";import{W as F,V as Qe}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150018.js";import{a as Xe,b as Ze}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150041.js";import{a as ea}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150038.js";import{a as aa}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150060.js";import{G as ta,d as sa,b as na}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a915008.js";import{B as oa}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150074.js";import{I as ia}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500109.js";import{u as O}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150027.js";import{S as ra}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150037.js";import{V as ca}from"./v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500110.js";function la(e){return typeof e=="object"&&e!==null&&"__type"in e&&e.__type==="Date"&&"value"in e&&typeof e.value=="string"}function ua(e){return typeof e=="object"&&e!==null&&"__type"in e&&e.__type==="Map"&&"value"in e&&Array.isArray(e.value)}var x=(e=>(e.IDLE="idle",e.RUNNING="running",e.PAUSED="paused",e.CANCELLED="cancelled",e.COMPLETED="completed",e.FAILED="failed",e))(x||{});const S=G()(ve((e,n)=>({executions:new Map,startExecution:(t,o,i,r)=>{e(s=>{const m=new Map(s.executions);return m.set(t,{campaignId:t,status:"running",type:r,currentContactIndex:0,currentActionIndex:0,totalContacts:o,totalActions:i,successCount:0,failedCount:0,startedAt:new Date,shouldPause:!1,shouldCancel:!1}),{executions:m}})},updateProgress:(t,o,i)=>{e(r=>{const s=new Map(r.executions),m=s.get(t);return m&&s.set(t,{...m,currentContactIndex:o,successCount:i?m.successCount+1:m.successCount,failedCount:i?m.failedCount:m.failedCount+1}),{executions:s}})},requestPause:t=>{e(o=>{const i=new Map(o.executions),r=i.get(t);return r&&r.status==="running"&&i.set(t,{...r,shouldPause:!0}),{executions:i}})},requestCancel:t=>{e(o=>{const i=new Map(o.executions),r=i.get(t);return r&&r.status!=="completed"&&i.set(t,{...r,shouldCancel:!0}),{executions:i}})},resume:t=>{e(o=>{const i=new Map(o.executions),r=i.get(t);return r&&r.status==="paused"&&i.set(t,{...r,status:"running",shouldPause:!1}),{executions:i}})},shouldPauseExecution:t=>{const o=n().executions.get(t);return(o==null?void 0:o.shouldPause)||!1},shouldCancelExecution:t=>{const o=n().executions.get(t);return(o==null?void 0:o.shouldCancel)||!1},completeExecution:t=>{e(o=>{const i=new Map(o.executions),r=i.get(t);return r&&i.set(t,{...r,status:"completed",completedAt:new Date}),{executions:i}})},failExecution:(t,o)=>{e(i=>{const r=new Map(i.executions),s=r.get(t);return s&&r.set(t,{...s,status:"failed",completedAt:new Date}),{executions:r}})},clearExecution:t=>{e(o=>{const i=new Map(o.executions);return i.delete(t),{executions:i}})}}),{name:"campaign-execution-store",storage:we(()=>Ke("CampaignExecutionDB","campaignExecutionStore"),{replacer:(e,n)=>n instanceof Date?{__type:"Date",value:n.toISOString()}:n instanceof Map?{__type:"Map",value:Array.from(n.entries())}:n,reviver:(e,n)=>la(n)?new Date(n.value):ua(n)?new Map(n.value):n}),version:1,partialize:e=>({executions:e.executions})}));var v=(e=>(e.DRAFT="Rascunho",e.PAUSED="Pausada",e.SENDING="Enviando",e.SENT="Enviada",e.FAILED="Falhou",e))(v||{});const xt={interval:{seconds:10},pause:{every:10,durationSeconds:60},signature:{disabled:!1,useCustomName:!1,customName:void 0}},oe=G((e,n)=>({steps:[{key:"contatos",label:y.getState().language.step_contatos,icon:H},{key:"acoes",label:y.getState().language.step_acoes,icon:W},{key:"revisao",label:y.getState().language.step_revisao,icon:J},{key:"envio",label:y.getState().language.step_envio,icon:Y},{key:"resultados",label:y.getState().language.step_resultados,icon:K}],currentStep:"contatos",setCurrentStep:t=>e({currentStep:t}),updateStepsLabels:t=>e({steps:[{key:"contatos",label:t.step_contatos,icon:H},{key:"acoes",label:t.step_acoes,icon:W},{key:"revisao",label:t.step_revisao,icon:J},{key:"envio",label:t.step_envio,icon:Y},{key:"resultados",label:t.step_resultados,icon:K}]})}));y.subscribe((e,n)=>{e.language!==n.language&&oe.getState().updateStepsLabels(e.language)});function da(e){return e!=null&&e.trim().length>0}function w(e,n){S.setState(t=>{const o=new Map(t.executions),i=o.get(e);return i&&o.set(e,{...i,...n}),{executions:o}})}function D(e){return S.getState().executions.get(e)}function pa(e){const{campaigns:n}=A.getState();return n.find(t=>t.id===e)}const se=e=>new Promise(n=>setTimeout(n,e)),fa=async()=>{try{const e=await F.Conn("getMyUserId");if(!e)throw new Error("ID do usuário não encontrado");const n=await F.Contact("get",e);if(!n)throw new Error("Não foi possível obter o contato do usuário");const t=await F.Contact("getProfilePictureUrl",e);return{id:n.id.toString(),name:n.name||n.pushname||"Eu",avatarUrl:t||"",phone:n.id.user}}catch(e){throw console.error("Erro ao obter contato do usuário:",e),new Error(`Falha ao carregar informações do usuário: ${e instanceof Error?e.message:"Erro desconhecido"}`)}},P=()=>{d({type:"Info",message:"Não é possível atribuir um contato não salvo a uma aba, etiqueta, fixá-lo ou transferi-lo de atendimento.",position:"top-right"})};async function ma({userID:e,acao:n,assiantura:t,remetente:o,campaignId:i,resumeFromActionIndex:r=0}){const{addMonitor:s,deleteMonitor:m,updateMonitor:h}=Se.getState(),E=S.getState(),p=[],_=ue();s({id:_,userID:e,sendAction:"Actived",remetente:o,actionsTam:n.length,actionIndice:r,activeAction:n[r]});for(const[b,c]of n.entries())if(!(b<r)){if(i&&E.shouldCancelExecution(i)){p.push(!1);break}if(i&&E.shouldPauseExecution(i))return w(i,{currentActionIndex:b,status:x.PAUSED,pausedAt:new Date,shouldPause:!1}),m(_),!1;if(!h(_,b,c)){p.push(!1);break}switch(i&&w(i,{currentActionIndex:b}),c.type){case"txt":p.push(await qe(u(e),c.propriedades,t));break;case"image":p.push(await Ge(u(e),c.propriedades,t));break;case"video":p.push(await $e(u(e),c.propriedades,t));break;case"audio":p.push(await Ue(u(e),c.propriedades));break;case"doc":p.push(await Ve(u(e),c.propriedades));break;case"pix":p.push(await Oe(u(e),c.propriedades));break;case"groupInvite":p.push(await Ie(u(e),c.propriedades));break;case"contact":p.push(await Fe(u(e),c.propriedades));break;case"linkPreview":p.push(await Te(u(e),c.propriedades));break;case"sticker":p.push(await Re(u(e),c.propriedades));break;case"addCRM":e.includes("@lid")?P():await De(T(e),c.propriedades.crmID,c.propriedades.abaID);break;case"removeCRM":await te(T(e),!1,c.propriedades.crmID,c.propriedades.abaID);break;case"removeAllCRM":await te(T(e),!0);break;case"addLabel":e.includes("@lid")?P():await ae(u(e),c.propriedades.labelID,"add");break;case"removeLabel":await ae(u(e),c.propriedades.labelID,"remove");break;case"removeAllLabel":await Pe(u(e));break;case"timer":await Me(c.propriedades.segundos);break;case"composing":await ee(u(e),c.propriedades.segundos,"txt");break;case"recording":await ee(u(e),c.propriedades.segundos,"audio");break;case"arquivar":await Z(u(e));break;case"desarquivar":await Z(u(e),!0);break;case"fixarChat":e.includes("@lid")?P():await X(u(e),"pin");break;case"desfixarChat":await X(u(e),"unpin");break;case"marcarNaoLido":await ke(u(e));break;case"transferir":e.includes("@lid")?P():await ze(u(e),c.propriedades);break;case"bloquear":await Ne(u(e));break;case"respostaRapida":await Ae(u(e),c.propriedades.respostaRapidaID,t);break;case"list":await Le(u(e),c.propriedades);break;default:console.warn(`No handler found for action type: ${c.type}`);break}}return m(_),p.length===0||p.every(b=>b&&b.id)}async function V({campaign:e,type:n,resumeFromIndex:t=0}){var q;const o=y.getState().language,{actions:i,config:r,id:s}=e,{interval:m,pause:h,signature:E}=r,{seconds:p}=m,{every:_,durationSeconds:b}=h,{disabled:c,useCustomName:k,customName:L}=E,{updateCampaign:g}=A.getState(),f=S.getState(),N=D(s);if(N&&N.status===x.RUNNING){d({type:"Info",message:o.send_campanha_ja_em_execucao});return}const z=n==="test"?[await fa()]:e.selectedContacts,ie=(N==null?void 0:N.currentActionIndex)||0;t===0?f.startExecution(s,z.length,i.length,n):w(s,{status:x.RUNNING,shouldPause:!1,shouldCancel:!1}),g(s,{status:v.SENDING}),oe.getState().setCurrentStep("envio"),d({type:"Info",message:t>0?o.send_retomando_envio:o.send_iniciando_envio});try{for(let j=t;j<z.length;j++){const M=z[j];if(f.shouldCancelExecution(s)){w(s,{status:x.CANCELLED,completedAt:new Date,shouldCancel:!1}),g(s,{status:v.DRAFT}),d({type:"Info",message:o.send_campanha_cancelada});return}const re={desativar:c,personalizar:k&&da(L),nome:(L==null?void 0:L.trim())||""},ce=j===t?ie:0,B=await ma({userID:M.id,acao:i,assiantura:re,remetente:"useAcaoEnvioEmMassaNew",campaignId:s,resumeFromActionIndex:ce});if(f.shouldCancelExecution(s)){w(s,{status:x.CANCELLED,completedAt:new Date,shouldCancel:!1}),g(s,{status:v.DRAFT}),d({type:"Info",message:o.send_campanha_cancelada});return}if(B===!1){g(s,{status:v.PAUSED}),d({type:"Info",message:`${o.send_campanha_pausada} ${j+1}, ${o.send_acao} ${((q=f.executions.get(s))==null?void 0:q.currentActionIndex)||0}`});return}if(f.updateProgress(s,j+1,B),j<z.length-1){if(await se(p*1e3),f.shouldCancelExecution(s)){w(s,{status:x.CANCELLED,completedAt:new Date,shouldCancel:!1}),g(s,{status:v.DRAFT}),d({type:"Info",message:o.send_campanha_cancelada});return}if((j+1)%_===0){const le=new Date(Date.now()+b*1e3);if(w(s,{status:x.PAUSED,isAutoPause:!0,autoPauseEndsAt:le,pausedAt:new Date}),d({type:"Info",message:`${o.send_pausa_apos_envios} ${b}s ${o.send_apos} ${e.config.pause.every} ${o.send_envios}`}),await se(b*1e3),f.shouldCancelExecution(s)){w(s,{status:x.CANCELLED,completedAt:new Date,shouldCancel:!1}),g(s,{status:v.DRAFT}),d({type:"Info",message:o.send_campanha_cancelada});return}w(s,{status:x.RUNNING,isAutoPause:!1,autoPauseEndsAt:void 0})}}}f.completeExecution(s),g(s,{status:v.SENT}),d({type:"Success",message:`${o.send_campanha_concluida} ${z.length} ${o.send_contatos_processados}`})}catch(j){const M=j instanceof Error?j:new Error(o.send_erro_desconhecido);f.failExecution(s,M.message),g(s,{status:v.FAILED}),d({type:"Error",message:`${o.send_erro_ao_enviar} ${M.message}`})}}async function ga(e){const n=y.getState().language,t=pa(e),o=D(e);if(!t){d({type:"Error",message:n.resume_campanha_nao_encontrada});return}if(!o){d({type:"Error",message:n.resume_estado_execucao_nao_encontrado});return}if(o.status!==x.PAUSED){d({type:"Info",message:n.resume_campanha_nao_pausada});return}await V({campaign:t,type:"full",resumeFromIndex:o.currentContactIndex})}function xa(e){const n=y.getState().language,t=D(e);if(!t){d({type:"Error",message:n.pause_campanha_nao_encontrada});return}if(t.status!==x.RUNNING){d({type:"Info",message:n.pause_campanha_nao_em_execucao});return}if(t.shouldPause){d({type:"Info",message:n.pause_pausa_ja_solicitada});return}S.getState().requestPause(e),d({type:"Info",message:n.pause_pausando_apos_acao_atual})}function _a(e){const n=y.getState().language,t=D(e);if(!t){d({type:"Error",message:n.cancel_campanha_nao_encontrada});return}if(t.status===x.COMPLETED||t.status===x.CANCELLED){d({type:"Info",message:n.cancel_campanha_ja_finalizada});return}if(t.shouldCancel){d({type:"Info",message:n.cancel_cancelamento_ja_solicitado});return}S.getState().requestCancel(e),d({type:"Info",message:n.cancel_cancelando_apos_acao_atual})}function ha(e){const[n,t]=l.useState(!1),o=y(g=>g.language),i=A(g=>g.campaigns.find(f=>f.id===e)),{updateCampaign:r}=A.getState(),s=S(g=>g.executions.get(e)),h=!U(g=>g.user.estado),E=!s||s.status===x.COMPLETED||s.status===x.CANCELLED||s.status===x.FAILED,{clearExecution:p}=S.getState();return{campaign:i,execution:s,isLoading:n,actions:{sendTest:async()=>{if(i){t(!0);try{if(!E)throw d({type:"Error",message:o.erro_iniciar_campanha}),new Error("Cannot start campaign: Campaign is already running or paused.");p(i.id);const g=A.getState().campaigns.find(f=>f.id===i.id);await V({campaign:g,type:"test"})}finally{t(!1)}}},sendFull:async()=>{if(i){t(!0);try{if(!E)throw d({type:"Error",message:o.erro_iniciar_campanha}),new Error("Cannot start campaign: Campaign is already running or paused.");if(h&&i.selectedContacts.length>5){const f=i.selectedContacts.slice(0,5);r(i.id,{selectedContacts:f})}p(i.id);const g=A.getState().campaigns.find(f=>f.id===i.id);await V({campaign:g,type:"full"})}finally{t(!1)}}},pause:()=>{xa(e)},resume:async()=>{t(!0);try{await ga(e)}finally{t(!1)}},cancel:()=>{_a(e)}},canStart:E,isRunning:(s==null?void 0:s.status)===x.RUNNING,isPaused:(s==null?void 0:s.status)===x.PAUSED,isCompleted:(s==null?void 0:s.status)===x.COMPLETED,isCancelled:(s==null?void 0:s.status)===x.CANCELLED}}const ba=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150094.js")),[]));function ya(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(ba,{})})}const Ca=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150095.js")).then(e=>e.i),[]));function Ea(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(Ca,{})})}const ja=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150096.js")),[]));function va(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(ja,{})})}const wa=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150097.js")),[]));function Sa(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(wa,{})})}const La=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150098.js")),[]));function Aa(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(La,{})})}const Na=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a9150099.js")),[]));function za(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(Na,{})})}const ka=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500100.js")).then(e=>e.i),[]));function Ma(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(ka,{})})}const Pa=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500101.js")),[]));function Da(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(Pa,{})})}const Ra=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500102.js")),[]));function Ta(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(Ra,{})})}const Fa=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500103.js")),[]));function Ia(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(Fa,{})})}function Oa(e){return ta({attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(e)}function Va(){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:"20",height:"20",viewBox:"0 0 24 24",style:{display:"inline-block"},children:a.jsx("path",{fill:"currentColor",d:"M2.001 9.352c0 1.873.849 2.943 1.683 3.943.031 1 .085 1.668-.333 3.183 1.748-.558 2.038-.778 3.008-1.374 1 .244 1.474.381 2.611.491-.094.708-.081 1.275.055 2.023-.752-.06-1.528-.178-2.33-.374-1.397.857-4.481 1.725-6.649 2.115.811-1.595 1.708-3.785 1.661-5.312-1.09-1.305-1.705-2.984-1.705-4.695-.001-4.826 4.718-8.352 9.999-8.352 5.237 0 9.977 3.484 9.998 8.318-.644-.175-1.322-.277-2.021-.314-.229-3.34-3.713-6.004-7.977-6.004-4.411 0-8 2.85-8 6.352zm20.883 10.169c-.029 1.001.558 2.435 1.088 3.479-1.419-.258-3.438-.824-4.352-1.385-.772.188-1.514.274-2.213.274-3.865 0-6.498-2.643-6.498-5.442 0-3.174 3.11-5.467 6.546-5.467 3.457 0 6.546 2.309 6.546 5.467 0 1.12-.403 2.221-1.117 3.074zm-7.563-3.021c0-.453-.368-.82-.82-.82s-.82.367-.82.82.368.82.82.82.82-.367.82-.82zm3 0c0-.453-.368-.82-.82-.82s-.82.367-.82.82.368.82.82.82.82-.367.82-.82zm3 0c0-.453-.368-.82-.82-.82s-.82.367-.82.82.368.82.82.82.82-.367.82-.82z"})})}function Ua(){const{language:e}=y(),{statusEnvio:n,chats:t}=Ye(),i=A(f=>f.campaigns).find(f=>f.status===v.SENDING),{isRunning:r,execution:s,isPaused:m}=ha(i==null?void 0:i.id),{open:h}=ne.getState(),{open:E}=Be.getState(),{open:p}=Ce.getState(),{label:_}=$.getState(),{user:b}=U.getState(),c=r||m||n.estado==="Atived"||n.estado==="Paused",k=((s==null?void 0:s.totalContacts)??0)-((s==null?void 0:s.currentContactIndex)??0),L=a.jsxs(a.Fragment,{children:[c&&a.jsx("div",{className:"relative",children:a.jsx("div",{className:"absolute -top-[10px] left-[20px]",children:a.jsx("span",{className:"abaTam border border-[#ffffff52] border-solid rounded-full p-1 shadow-lg text-[12px] bg-[var(--primaria)]",children:a.jsx("em",{className:"text-[#ffffffd4] font-bold",children:(t==null?void 0:t.length)||k})})})}),a.jsx("span",{id:"icoCampaign",children:a.jsx(ea,{size:20,className:de((n.estado==="Atived"||r)&&"text-[var(--wds-teal-500)]",(n.estado==="Paused"||m)&&"text-[goldenrod]",r&&"text-[var(--wds-teal-500)]")})})]});return[{id:"crm",name:"CRM",icon:a.jsx(pe,{size:22}),function:()=>chrome.runtime.sendMessage({message:"CRM"})},{id:"env_massa",name:e.envioMassa,icon:L,function:()=>p(a.jsx(Ea,{}))},{id:"ia",name:"Agente IA",icon:a.jsx(ia,{color:"var(--ico-color)"}),disabled:_.ia_wascript.length===0,function:()=>window.open(`${_.ia_wascript}${b.estado?"/?clientePremium":""}`,"_blank")},{id:"calendar",name:e.centralDeAgendamentos,icon:a.jsx(sa,{size:20}),function:()=>p(a.jsx(ya,{}))},{id:"flow",name:e.fluxo,icon:a.jsx(fe,{size:20}),function:()=>chrome.runtime.sendMessage({message:"FLOW"})},{id:"funnil_crm",name:e.funilCRM,icon:a.jsx(Xe,{size:20}),function:()=>chrome.runtime.sendMessage({message:"funnil"})},{id:"att_atendimento",name:e.autoAtendimento,icon:a.jsx(me,{size:22}),function:()=>h(a.jsx(va,{}))},{id:"follow_up",name:e.followUp,icon:a.jsx(ge,{size:22}),function:()=>h(a.jsx(Sa,{}))},{id:"status",name:e.status,icon:a.jsx(Ze,{size:22}),function:()=>h(a.jsx(Ma,{}))},{id:"api",name:"API",icon:a.jsx(xe,{size:22}),function:()=>h(a.jsx(Ta,{}),!1)},{id:"webhook",name:"WebHook",icon:a.jsx(_e,{size:20}),function:()=>h(a.jsx(Da,{}))},{id:"links",name:e.links,icon:a.jsx(aa,{size:20}),function:()=>h(a.jsx(za,{}))},{id:"start_chat",name:e.start_chat,icon:a.jsx(Va,{}),function:()=>h(a.jsx(Aa,{}))},{id:"afiliate_link",name:e.indiqueEGanhe,icon:a.jsx(oa,{size:20}),disabled:_.rewards.length===0,function:()=>window.open(_.rewards,"_blank")},{id:"google_funcs",name:e.att_google,icon:a.jsx(Oa,{size:20}),function:f=>E(a.jsx(Ia,{}),{placement:"right"},f.target)}]}function $a(){const{activeMenu:e}=Ee(),{label:n}=$(),t=Q(r=>r.close),o=Q(r=>r.open);return a.jsxs("div",{className:"flex flex-col items-center gap-2",children:[a.jsx("div",{className:"lg:tooltip  lg:tooltip-right mb-2","data-tip":n.name,children:a.jsx("div",{className:"pulse cursor-pointer rounded-full w-9 h-9 shadow-lg",children:a.jsx("span",{children:a.jsx("img",{src:chrome.runtime.getURL("label/icons/icon.png"),className:"w-10 rounded-full select-none",draggable:!1})})})}),a.jsx("div",{className:"flex flex-col items-center gap-2 w-full overflow-y-auto overflow-x-hidden scroll_bar",style:{height:"calc(100vh - 302px)"},children:Ua().map(r=>!r.disabled&&e[r.id]!==!1&&a.jsx("div",{onClick:r.function,onMouseEnter:s=>o(r.name,{placement:"right"},s.target),onMouseLeave:t,children:a.jsx("div",{className:"menu-item pulse cursor-pointer rounded-[10px] bg-[var(--ico-border-color)] p-2 text-[var(--ico-color)]",children:r.icon})},r.id))})]})}const Ga="/assets/mp3/Notification.chunk.mp3",R=G()(e=>({notifyNotVisualized:0,getCaixaDeEntrada:()=>{const n=O.getState().notifications,{renderNotificacoes_box:t,isBoxVisible:o}=I.getState(),i=t().filter(s=>!o(s.id)),r=[...n,...i];return r.sort((s,m)=>m.data-s.data),r},getNotifyNotVisualized:()=>e(()=>{const{renderNotificacoes_box:n,isBoxVisible:t}=I.getState(),{naoVisualizadaTam:o}=O.getState(),r=n().filter(s=>!t(s.id)).length+o;return r>JSON.parse(localStorage.getItem("notifyTam"))&&he("content"+Ga,1500),localStorage.setItem("notifyTam",JSON.stringify(r)),{notifyNotVisualized:r}})}));I.subscribe(()=>{R.getState().getNotifyNotVisualized()});O.subscribe(()=>{R.getState().getNotifyNotVisualized()});(()=>{const e=JSON.parse(localStorage.getItem("notifyTam"));e&&e>0&&R.setState({notifyNotVisualized:e})})();const qa=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500104.js")).then(e=>e.i),[]));function Ba(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(qa,{})})}const Ha=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500105.js")),[]));function Wa(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(Ha,{})})}const Ja=l.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_2_7_b7b85612-c64e-4acf-adcb-deb761a91500106.js")),[]));function Ya(){return a.jsx(l.Suspense,{fallback:a.jsx(a.Fragment,{}),children:a.jsx(Ja,{})})}function Ka(){const{language:e}=y(),{user:n,setRemoveUser:t}=U(),{open:o}=ne(),{open:i}=je(),{label:r}=$(),{notifyNotVisualized:s}=R(),m=()=>{ye({icon:a.jsx(Je,{className:"text-[var(--primaria)]",size:24}),content:a.jsxs(a.Fragment,{children:[e.gostariaDeRemoverLogin,"?",a.jsx("br",{})," ",e.usuarioLogado,a.jsx("strong",{children:n.login})]}),confirmText:e.confirm,submit:()=>{t()}})},h=a.jsxs(a.Fragment,{children:[s>0&&a.jsx("div",{className:"absolute -top-1 -right-2",children:a.jsx("span",{className:"abaTam border border-[#ffffff52] border-solid rounded-full p-1 shadow-lg text-[12px] bg-[var(--primaria)] ",children:a.jsx("em",{className:"text-[#ffffffd4] font-bold",children:s})})}),a.jsx(ra,{size:20})]}),E=[{id:1,name:n.estado?n.login:e.logar,icon:a.jsx(na,{className:n.estado?"text-[var(--wds-teal-500)]":"text-red-500 user-icon-circle-man",size:20}),function:()=>n.estado?m():o(a.jsx(He,{}))},{id:2,name:e.configAgendamento_title,icon:a.jsx(We,{size:20}),function:()=>i(a.jsx(Ba,{}))},{id:3,name:e.notifications,icon:h,function:()=>i(a.jsx(Ya,{}))},{id:4,name:e.func_menu,icon:a.jsx(ca,{size:20}),function:()=>i(a.jsx(Wa,{}))}];return a.jsxs("div",{className:"flex flex-col items-center gap-2 mb-4",children:[r.tutorial&&a.jsx("div",{onClick:()=>window.open(r.tutorial,"_blank"),className:"lg:tooltip lg:tooltip-right cursor-pointer","data-tip":e.tutoriais,children:a.jsx("span",{className:"pulse",children:a.jsx(be,{className:"text-[red]",size:26})})}),E.reverse().map(_=>a.jsx("div",{className:"lg:tooltip  lg:tooltip-right","data-tip":_.name,onClick:_.function,children:a.jsx("div",{className:"menu-item pulse cursor-pointer rounded-[10px]  bg-[var(--ico-border-color)] p-2 text-[var(--ico-color)]",children:_.icon})},_.id)),a.jsx("div",{className:"badge badge-sm badge-ghost text-xs text-base-content/60 font-semibold font-rounded",children:Qe.version})]})}function Qa(){return a.jsx("section",{"data-id":"Menu",children:a.jsx("div",{className:"w-[60px] h-[100vh] absolute z-[112] bg-[var(--menu-color)]",children:a.jsxs("div",{className:"animate__animated animate__fadeInLeft h-full my-2 flex flex-col justify-between gap-2",children:[a.jsx($a,{}),a.jsx(Ka,{})]})})})}const _t=Object.freeze(Object.defineProperty({__proto__:null,default:Qa},Symbol.toStringTag,{value:"Module"}));export{va as A,v as C,Ea as E,Sa as F,Ua as R,Ma as S,ha as a,x as b,R as c,xt as d,S as e,fa as g,_t as i,oe as u};
